import{i as h,h as f,k as a,o as d,F as l,u as y}from"./C4ENrkrF.js";function S(...r){return r.filter(Boolean).join(" ")}const p=typeof document<"u";let g=0;class x{#t=h(f([]));get toasts(){return a(this.#t)}set toasts(t){d(this.#t,t,!0)}#s=h(f([]));get heights(){return a(this.#s)}set heights(t){d(this.#s,t,!0)}#e=t=>{const s=this.toasts.findIndex(e=>e.id===t);return s===-1?null:s};addToast=t=>{p&&this.toasts.unshift(t)};updateToast=({id:t,data:s,type:e,message:u})=>{const o=this.toasts.findIndex(c=>c.id===t),i=this.toasts[o];this.toasts[o]={...i,...s,id:t,title:u,type:e,updated:!0}};create=t=>{const{message:s,...e}=t,u=typeof t?.id=="number"||t.id&&t.id?.length>0?t.id:g++,o=t.dismissable===void 0?!0:t.dismissable,i=t.type===void 0?"default":t.type;return l(()=>{this.toasts.find(m=>m.id===u)?this.updateToast({id:u,data:t,type:i,message:s,dismissable:o}):this.addToast({...e,id:u,title:s,dismissable:o,type:i})}),u};dismiss=t=>(l(()=>{if(t===void 0){this.toasts=this.toasts.map(e=>({...e,dismiss:!0}));return}const s=this.toasts.findIndex(e=>e.id===t);this.toasts[s]&&(this.toasts[s]={...this.toasts[s],dismiss:!0})}),t);remove=t=>{if(t===void 0){this.toasts=[];return}const s=this.#e(t);if(s!==null)return this.toasts.splice(s,1),t};message=(t,s)=>this.create({...s,type:"default",message:t});error=(t,s)=>this.create({...s,type:"error",message:t});success=(t,s)=>this.create({...s,type:"success",message:t});info=(t,s)=>this.create({...s,type:"info",message:t});warning=(t,s)=>this.create({...s,type:"warning",message:t});loading=(t,s)=>this.create({...s,type:"loading",message:t});promise=(t,s)=>{if(!s)return;let e;s.loading!==void 0&&(e=this.create({...s,promise:t,type:"loading",message:typeof s.loading=="string"?s.loading:s.loading()}));const u=t instanceof Promise?t:t();let o=e!==void 0;return u.then(i=>{if(typeof i=="object"&&i&&"ok"in i&&typeof i.ok=="boolean"&&!i.ok){o=!1;const c=T(i);this.create({id:e,type:"error",message:c})}else if(s.success!==void 0){o=!1;const c=typeof s.success=="function"?s.success(i):s.success;this.create({id:e,type:"success",message:c})}}).catch(i=>{if(s.error!==void 0){o=!1;const c=typeof s.error=="function"?s.error(i):s.error;this.create({id:e,type:"error",message:c})}}).finally(()=>{o&&(this.dismiss(e),e=void 0),s.finally?.()}),e};custom=(t,s)=>{const e=s?.id||g++;return this.create({component:t,id:e,...s}),e};removeHeight=t=>{this.heights=this.heights.filter(s=>s.toastId!==t)};setHeight=t=>{const s=this.#e(t.toastId);if(s===null){this.heights.push(t);return}this.heights[s]=t};reset=()=>{this.toasts=[],this.heights=[]}}function T(r){return r&&typeof r=="object"&&"status"in r?`HTTP error! Status: ${r.status}`:`Error! ${r}`}const n=new x;function I(r,t){return n.create({message:r,...t})}class k{#t=y(()=>n.toasts.filter(t=>!t.dismiss));get toasts(){return a(this.#t)}}const b=I,v=Object.assign(b,{success:n.success,info:n.info,warning:n.warning,error:n.error,custom:n.custom,message:n.message,promise:n.promise,dismiss:n.dismiss,loading:n.loading,getActiveToasts:()=>n.toasts.filter(r=>!r.dismiss)});export{k as S,n as a,S as c,v as t};
