import{c as h}from"./BoVfYPwK.js";import{aY as u,K as w,J as a,L as m,aq as p,y,F as x}from"./C4ENrkrF.js";const b=typeof window<"u"?window:void 0;function v(n){let t=n.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}class E{#e;#t;constructor(t={}){const{window:e=b,document:i=e?.document}=t;e!==void 0&&(this.#e=i,this.#t=h(s=>{const o=u(e,"focusin",s),r=u(e,"focusout",s);return()=>{o(),r()}}))}get current(){return this.#t?.(),this.#e?v(this.#e):null}}new E;class _{#e;#t;constructor(t){this.#e=t,this.#t=Symbol(t)}get key(){return this.#t}exists(){return w(this.#t)}get(){const t=a(this.#t);if(t===void 0)throw new Error(`Context "${this.#e}" not found`);return t}getOr(t){const e=a(this.#t);return e===void 0?t:e}set(t){return m(this.#t,t)}}function g(n,t){switch(n){case"post":y(t);break;case"pre":p(t);break}}function f(n,t,e,i={}){const{lazy:s=!1}=i;let o=!s,r=Array.isArray(n)?[]:void 0;g(t,()=>{const c=Array.isArray(n)?n.map(l=>l()):n();if(!o){o=!0,r=c;return}const d=x(()=>e(c,r));return r=c,d})}function k(n,t,e){f(n,"post",t,e)}function A(n,t,e){f(n,"pre",t,e)}k.pre=A;export{_ as C,b as d,k as w};
