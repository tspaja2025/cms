import"./DsnmJJEf.js";import{u as g,k as c,o as _,g as D,p as b,l as y,a as S,b as f,c as x,v as I,f as L,d as K,w as N,r as Q,bk as U}from"./C4ENrkrF.js";import{c as q}from"./CoQcnciM.js";import{p as n,i as B,r as C,s as j}from"./Xxn1VSU5.js";import{c as E}from"./CWahLh_v.js";import{a as F}from"./D_gvaVKc.js";import{a as M,f as V,w as W,c as G,b as u,m as H}from"./Cw4pjOYq.js";import"./CdVPB6xn.js";import{C as X}from"./BOOZtILw.js";import{D as Y}from"./rCxuiX6N.js";const O=V({component:"avatar",parts:["root","image","fallback"]}),R=new X("Avatar.Root");class T{static create(t){return R.set(new T(t))}opts;domContext;attachment;constructor(t){this.opts=t,this.domContext=new Y(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=M(this.opts.ref)}loadImage(t,s,a){if(this.opts.loadingStatus.current==="loaded")return;let r;const o=new Image;return o.src=t,s!==void 0&&(o.crossOrigin=s),a&&(o.referrerPolicy=a),this.opts.loadingStatus.current="loading",o.onload=()=>{r=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},o.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{r&&this.domContext.clearTimeout(r)}}#t=g(()=>({id:this.opts.id.current,[O.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment}));get props(){return c(this.#t)}set props(t){_(this.#t,t)}}class z{static create(t){return new z(t,R.get())}opts;root;attachment;constructor(t,s){this.opts=t,this.root=s,this.attachment=M(this.opts.ref),W.pre([()=>this.opts.src.current,()=>this.opts.crossOrigin.current],([a,r])=>{if(!a){this.root.opts.loadingStatus.current="error";return}this.root.loadImage(a,r,this.opts.referrerPolicy.current)})}#t=g(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[O.image]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current,...this.attachment}));get props(){return c(this.#t)}set props(t){_(this.#t,t)}}class J{static create(t){return new J(t,R.get())}opts;root;attachment;constructor(t,s){this.opts=t,this.root=s,this.attachment=M(this.opts.ref)}#t=g(()=>this.root.opts.loadingStatus.current==="loaded"?{display:"none"}:void 0);get style(){return c(this.#t)}set style(t){_(this.#t,t)}#e=g(()=>({style:this.style,"data-status":this.root.opts.loadingStatus.current,[O.fallback]:"",...this.attachment}));get props(){return c(this.#e)}set props(t){_(this.#e,t)}}var Z=L("<div><!></div>");function $(m,t){const s=D();b(t,!0);let a=n(t,"delayMs",3,0),r=n(t,"loadingStatus",15,"loading"),o=n(t,"id",19,()=>G(s)),h=n(t,"ref",15,null),p=C(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const v=T.create({delayMs:u.with(()=>a()),loadingStatus:u.with(()=>r(),e=>{r()!==e&&(r(e),t.onLoadingStatusChange?.(e))}),id:u.with(()=>o()),ref:u.with(()=>h(),e=>h(e))}),l=g(()=>H(p,v.props));var d=y(),P=S(d);{var A=e=>{var i=y(),w=S(i);I(w,()=>t.child,()=>({props:c(l)})),f(e,i)},k=e=>{var i=Z();F(i,()=>({...c(l)}));var w=K(i);I(w,()=>t.children??N),Q(i),f(e,i)};B(P,e=>{t.child?e(A):e(k,!1)})}f(m,d),x()}var tt=L("<img/>");function et(m,t){const s=D();b(t,!0);let a=n(t,"id",19,()=>G(s)),r=n(t,"ref",15,null),o=n(t,"crossorigin",3,void 0),h=n(t,"referrerpolicy",3,void 0),p=C(t,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const v=z.create({src:u.with(()=>t.src),id:u.with(()=>a()),ref:u.with(()=>r(),e=>r(e)),crossOrigin:u.with(()=>o()),referrerPolicy:u.with(()=>h())}),l=g(()=>H(p,v.props));var d=y(),P=S(d);{var A=e=>{var i=y(),w=S(i);I(w,()=>t.child,()=>({props:c(l)})),f(e,i)},k=e=>{var i=tt();F(i,()=>({...c(l),src:t.src})),U(i),f(e,i)};B(P,e=>{t.child?e(A):e(k,!1)})}f(m,d),x()}function ht(m,t){b(t,!0);let s=n(t,"ref",15,null),a=n(t,"loadingStatus",15,"loading"),r=C(t,["$$slots","$$events","$$legacy","ref","loadingStatus","class"]);var o=y(),h=S(o);{let p=g(()=>E("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class));q(h,()=>$,(v,l)=>{l(v,j({"data-slot":"avatar",get class(){return c(p)}},()=>r,{get ref(){return s()},set ref(d){s(d)},get loadingStatus(){return a()},set loadingStatus(d){a(d)}}))})}f(m,o),x()}function ft(m,t){b(t,!0);let s=n(t,"ref",15,null),a=C(t,["$$slots","$$events","$$legacy","ref","class"]);var r=y(),o=S(r);{let h=g(()=>E("aspect-square size-full",t.class));q(o,()=>et,(p,v)=>{v(p,j({"data-slot":"avatar-image",get class(){return c(h)}},()=>a,{get ref(){return s()},set ref(l){s(l)}}))})}f(m,r),x()}export{ht as A,ft as a,J as b};
