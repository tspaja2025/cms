import{b as x}from"./Cw4pjOYq.js";import"./CdVPB6xn.js";import{A as l,a as u,b as h,c as d,E as R,H as v}from"./Duhtze-4.js";function K(e){return window.getComputedStyle(e).getPropertyValue("direction")}function C(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?h:u,vertical:d}[t]}function b(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?u:h,vertical:l}[t]}function z(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:C(e,t),prevKey:b(e,t)}}class T{#t;#e=x(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,o,c=!1){const f=this.#t.rootNode.current;if(!f||!t)return;const r=this.getCandidateNodes();if(!r.length)return;const s=r.indexOf(t),m=K(f),{nextKey:y,prevKey:g}=z(m,this.#t.orientation.current),p=this.#t.loop.current,a={[y]:s+1,[g]:s-1,[v]:0,[R]:r.length-1};if(c){const N=y===d?u:d,A=g===l?h:l;a[N]=s+1,a[A]=s-1}let n=a[o.key];if(n===void 0)return;o.preventDefault(),n<0&&p?n=r.length-1:n===r.length&&p&&(n=0);const i=r[n];if(i)return i.focus(),this.#e.current=i.id,this.#t.onCandidateFocus?.(i),i}getTabIndex(t){const o=this.getCandidateNodes(),c=this.#e.current!==null;return t&&!c&&o[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}}export{T as R};
